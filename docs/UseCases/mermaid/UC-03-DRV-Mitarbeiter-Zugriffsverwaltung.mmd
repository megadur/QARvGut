sequenceDiagram
    participant DRV as DRV-Mitarbeiter
    participant RGA as rvGutachtenAdmin
    participant RVG as rvGutachten System
    participant ELG as eLogin API
    participant DB as Datenbank
    participant AUD as Audit Manager

    Note over DRV,AM: UC02 DRV-Mitarbeiter Support-Zugang beantragen

    DRV->>RGA: 01. Support-Zugang beantragen
    RGA->>RGA: 02. Antrag validieren

    RGA->>ELG: 03. Mitarbeiter-Status validieren
    ELG->>RGA: 04. Validierungsresultat

    alt eLogin Validierung fehlgeschlagen
        RGA->>DRV: 5a. Berechtigung ungültig
    else Validierung erfolgreich
        RGA->>RGA: 5b. Berechtigungsstufe bestimmen

        RGA->>RVG: 06. DRV-Account erstellen (Support-Rolle)
        RVG->>DB: 07. Account mit erweiterten Rechten speichern
        DB->>RVG: 08. Erstellungsbestätigung

        RVG->>AUD: 09. Account-Erstellung protokollieren

        alt Support Level 1 (Standard)
            RVG->>DB: 10a. Basis-Support-Rechte zuweisen
            Note over RG: Auftragszuweisungen einsehen, Dokumentübersicht
        else Support Level 2 (Erweitert)
            RVG->>DB: 10b. Erweiterte Support-Rechte zuweisen
            Note over RG: + System-Konfiguration, Benutzerverwaltung
        else Support Level 3 (Administrator)
            RVG->>DB: 10c. Administrator-Rechte zuweisen
            Note over RG: + Vollzugriff auf alle Funktionen
        end

        RVG->>DRV: 11. Account erstellt - Login-Daten senden
        RVG->>AUD: 12. Berechtigungserteilung protokollieren
    end

    Note over DRV,AM: DRV-Mitarbeiter nutzt Support-Funktionen

    DRV->>RVG: 13. Bei Support-Dashboard anmelden
    RVG->>DB: 14. Benutzer authentifizieren und Berechtigung prüfen
    DB->>RVG: 15. Authentifizierung + Rollenberechtigung

    alt Zugriff auf Auftragszuweisungen
        DRV->>RVG: 16a. Auftragszuweisungen einsehen
        RVG->>DB: 17a. Aufträge laden (alle Gutachter)
        DB->>RVG: 18a. Auftragsdaten
        RVG->>DRV: 19a. Vollständige Auftragsliste anzeigen
        RVG->>AUD: 20a. Auftragszugriff protokollieren

        DRV->>RVG: 21. Nach VSNR/Gutachter/EFN suchen
        RVG->>DB: 22. Filterabfrage ausführen
        DB->>RVG: 23. Gefilterte Ergebnisse
        RVG->>DRV: 24. Suchergebnisse anzeigen
    end

    alt Zugriff auf Dokumentenübersicht
        DRV->>RVG: 16b. Dokumentenstatus prüfen
        RVG->>DB: 17b. Dokumentenvollständigkeit abfragen
        DB->>RVG: 18b. Dokument-Status pro Auftrag
        RVG->>DRV: 19b. Vollständigkeitsreport anzeigen
        RVG->>AUD: 20b. Dokumentenzugriff protokollieren
    end

    alt System-Konfiguration (Level 2+)
        DRV->>RVG: 16c. Gutachter-Registrierungen verwalten
        RVG->>DB: 17c. Pending-Registrierungen laden
        DB->>RVG: 18c. Registrierungsliste
        RVG->>DRV: 19c. Genehmigungsworkflow anzeigen

        DRV->>RVG: 25. Registrierung genehmigen/ablehnen
        RVG->>DB: 26. Status aktualisieren
        RVG->>AUD: 27. Admin-Entscheidung protokollieren
    end